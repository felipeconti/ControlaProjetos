<%- model_class = Meeting -%>

<div class="page-header">
  <h3><%=t '.title', :default => model_class.model_name.human.pluralize %></h3>
</div>

<div class="add-master-button">
  <%= link_to "Nova ReuniÃ£o", new_meeting_path, class: 'btn btn-primary' %>
</div>

<table class="table table-hover table-bordered table-striped">
  <thead>
  <tr>
    <th><%= model_class.human_attribute_name(:title) %></th>
    <th><%= model_class.human_attribute_name(:date_init) %></th>
    <th><%= model_class.human_attribute_name(:date_end) %></th>
    <th><%= t 'items' %></th>
    <th class="pending"><%= t 'items_pending' %></th>
    <th class="completed"><%= t 'items_completed' %></th>
    <th class="canceled"><%= t 'items_canceled' %></th>
    <th><%=t 'actions', :default => t("helpers.actions") %></th>
  </tr>
  </thead>
  <tbody>
  <% @meetings.each do |meeting| %>
      <tr>
        <td><%= link_to meeting.title, meeting_path(meeting) %></td>
        <td><%= meeting.date_init %></td>
        <td><%= meeting.date_end %></td>
        <td><%= meeting.meeting_items.count %></td>
        <td><%= meeting.meeting_items.where(get_where_with_state(1)).count %></td>
        <td><%= meeting.meeting_items.where(get_where_with_state(2)).count %></td>
        <td><%= meeting.meeting_items.where(get_where_with_state(3)).count %></td>
        <td>
          <%= link_to t('edit', :default => t("helpers.links.edit")),
                      edit_meeting_path(meeting), :class => 'btn btn-mini' %>
          <%= link_to t('destroy', :default => t("helpers.links.destroy")),
                      meeting_path(meeting),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => t('sure'))) },
                      :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>