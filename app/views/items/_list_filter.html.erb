<%- model_class = Item -%>

<% @items_filtred = @task.items.where(where) %>

<% if @items_filtred.count > 0 %>
  
  <% case type %>
  <% when 1 %>
    <h3 class="title_item">Pendentes</h3>
  <% when 2 %>
    <h3 class="title_item completed">Concluídos</h3>
  <% when 3 %>
    <h3 class="title_item canceled">Cancelados</h3>
  <% else %>
    <h3 class="title_item no_priority">Aguardando avaliação de prioridade</h3>
  <% end %>
  
  <table class="table table-hover table-bordered table-striped">
    <thead>
      <tr>
        <th><%= model_class.human_attribute_name(:priority) %></th>
        <th><%= model_class.human_attribute_name(:title) %></th>
        <th><%= model_class.human_attribute_name(:date_start) %></th>
        <th><%= model_class.human_attribute_name(:date_end) %></th>
        <th><%= model_class.human_attribute_name(:hour_estimated) %></th>
        <th><%= model_class.human_attribute_name(:hour_used) %></th>
        <th><%= model_class.human_attribute_name(:user_id) %></th>
        <th><%= model_class.human_attribute_name(:state_id) %></th>
        <th><%=t 'actions', :default => t("helpers.actions") %></th>
      </tr>
    </thead>
    <tbody>
      <%= render @items_filtred.order(:priority) %>
    </tbody>
  </table>

<% end %>
